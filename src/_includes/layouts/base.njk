<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{{ title or "Learning Journal" }}</title>
  <link rel="stylesheet" href="/styles.css">
  <!-- MathJax 配置和加载 -->
  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true,
        processEnvironments: true
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <!-- Netlify Identity Widget -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1><a href="/">{{ site.title }}</a></h1>
      <nav>
        <a href="/">Home</a>
        <a href="/about/">About</a>
        <a href="/posts/">Posts</a>
        <a href="/editor/">Editor</a>
      </nav>
    </div>
  </header>

  <main class="container content">
    {{ content | safe }}
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>© 2025 {{ site.author.name }} • Built with Eleventy</p>
    </div>
  </footer>

  <!-- Netlify Identity 重定向脚本 -->
  <script>
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", user => {
        if (!user) {
          window.netlifyIdentity.on("login", () => {
            document.location.href = "/editor/";
          });
        }
      });
    }
  </script>
</body>
</html>
